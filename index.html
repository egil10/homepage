<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1a1a2e">
    <title>My Projects - Style Hub</title>
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <style>
        /* Critical CSS for initial render */
        html {
            scroll-behavior: smooth;
        }
        
        /* Prevent layout shift */
        .projects-grid {
            min-height: 200px;
        }
        
        /* Optimize font rendering */
        * {
            text-rendering: optimizeSpeed;
        }
        
        /* Critical above-the-fold styles */
        body {
            opacity: 0;
            animation: fadeIn 0.3s ease forwards;
        }
        
        @keyframes fadeIn {
            to { opacity: 1; }
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@300;400;600;700&family=Orbitron:wght@400;700;900&family=Poppins:wght@300;400;600;700&family=Comfortaa:wght@300;400;600;700&family=Playfair+Display:wght@400;700;900&family=Space+Mono:wght@400;700&family=Rubik:wght@300;400;600;700&family=Fredoka+One&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --theme: '8bit';
        }

        body {
            min-height: 100vh;
            padding: 20px;
            padding-bottom: 40px;
            overflow-x: hidden;
            transition: opacity 0.5s ease;
            transform: translateZ(0);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            transition: opacity 0.5s ease, transform 0.5s ease;
            contain: layout style;
        }

        .title {
            margin-bottom: 10px;
            transition: all 0.5s ease;
        }

        .subtitle {
            margin-bottom: 30px;
            transition: all 0.5s ease;
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
            margin-top: 30px;
            contain: layout;
        }

        .project-card:not(:hover) {
            content-visibility: auto;
            contain-intrinsic-size: auto 300px;
        }

        /* GPU acceleration for all hover transforms */
        .project-card:hover {
            will-change: transform;
        }

        .project-card:hover .preview-window {
            will-change: transform;
        }

        /* Optimize rendering performance */
        .projects-grid > * {
            contain: layout style paint;
        }

        /* Reduce paint operations */
        .preview-window,
        .window-header,
        .loading-overlay {
            backface-visibility: hidden;
            perspective: 1000px;
        }

        .project-card {
            padding: 15px;
            text-decoration: none;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
            position: relative;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            will-change: transform;
            transform: translateZ(0);
            contain: layout style paint;
        }

        .preview-window {
            width: 100%;
            height: 200px;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: transform;
            transform: translateZ(0);
            contain: layout style paint;
            isolation: isolate;
            /* Create a new stacking context to isolate iframe from theme changes */
            transform-style: preserve-3d;
        }

        .window-header {
            height: 24px;
            display: flex;
            align-items: center;
            padding: 0 8px;
            position: relative;
            z-index: 10;
            transition: all 0.3s ease;
        }

        .window-dots {
            display: flex;
            gap: 4px;
        }

        .dot {
            width: 8px;
            height: 8px;
            transition: all 0.3s ease;
        }

        .preview-iframe {
            width: 100%;
            height: calc(100% - 24px);
            border: none;
            background: #fff;
            transform: scale(0.5) translateZ(0);
            transform-origin: top left;
            width: 200%;
            height: 200%;
            pointer-events: none;
            will-change: transform;
            contain: strict;
            isolation: isolate;
            /* Prevent iframe from being affected by parent theme changes */
            transform-style: preserve-3d;
        }

        .loading-overlay {
            position: absolute;
            top: 24px;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 5;
            transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: opacity;
            transform: translateZ(0);
        }

        .loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
            visibility: hidden;
        }

        .loading-text {
            transition: all 0.3s ease;
        }

        .preview-fallback {
            width: 100%;
            height: calc(100% - 24px);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 10px;
            transition: all 0.3s ease;
        }

        .project-info {
            flex: 1;
        }

        .project-name {
            margin-bottom: 8px;
            word-break: break-word;
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .project-url {
            opacity: 0.8;
            word-break: break-all;
            transition: all 0.3s ease;
        }

        .sort-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            transition: opacity 0.3s ease;
        }

        .sort-label {
            font-size: 0.7rem;
            opacity: 0.8;
            transition: all 0.3s ease;
        }

        .sort-btn {
            padding: 8px 16px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.2s ease;
            border-radius: 4px;
            will-change: transform;
            transform: translateZ(0);
            font-size: 0.65rem;
        }

        .sort-btn:hover {
            transform: scale(1.05) translateZ(0);
        }

        .sort-btn.active {
            transform: scale(1.1) translateZ(0);
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
            margin-top: 30px;
            contain: layout;
        }

        .project-card {
            padding: 15px;
            text-decoration: none;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
            position: relative;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            will-change: transform;
            transform: translateZ(0);
            contain: layout style paint;
        }

        .project-card.hidden {
            display: none;
        }

        .project-card.sorting {
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease;
        }

        .style-footer {
            margin-top: 80px;
            padding: 30px 20px;
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            transition: all 0.5s ease;
            border-top-width: 4px;
            border-top-style: solid;
        }

        .style-btn {
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
            border-radius: 4px;
            will-change: transform;
            transform: translateZ(0);
        }

        .style-btn.active {
            transform: scale(1.1) translateZ(0);
        }

        /* ========== 8-BIT THEME ========== */
        body[data-theme="8bit"] {
            font-family: 'Press Start 2P', cursive;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #fff;
        }

        body[data-theme="8bit"] .title {
            font-size: 2.5rem;
            color: #ff6b6b;
            text-shadow: 4px 4px 0px #ff1744, 8px 8px 0px #000;
            letter-spacing: 2px;
        }

        body[data-theme="8bit"] .subtitle {
            font-size: 0.8rem;
            color: #4ecdc4;
            text-shadow: 2px 2px 0px #000;
        }

        body[data-theme="8bit"] .project-card {
            background: linear-gradient(145deg, #2d2d44, #1f1f2e);
            border: 4px solid #fff;
            box-shadow: 0 0 0 2px #000, 0 8px 0 0 #000, 0 8px 0 2px #fff;
        }

        body[data-theme="8bit"] .project-card:hover {
            transform: translate3d(0, -4px, 0);
            box-shadow: 0 0 0 2px #000, 0 12px 0 0 #000, 0 12px 0 2px #fff, 0 0 20px rgba(255, 107, 107, 0.5);
            border-color: #ff6b6b;
        }

        body[data-theme="8bit"] .preview-window {
            background: #000;
            border: 3px solid #fff;
            border-bottom: 6px solid #fff;
            box-shadow: inset 0 0 0 2px #000, 0 4px 0 0 #000;
        }

        body[data-theme="8bit"] .window-header {
            background: linear-gradient(180deg, #4a4a6a 0%, #2d2d44 100%);
            border-bottom: 2px solid #000;
        }

        body[data-theme="8bit"] .dot {
            border: 1px solid #000;
            border-radius: 0;
        }

        body[data-theme="8bit"] .dot.red { background: #ff6b6b; }
        body[data-theme="8bit"] .dot.yellow { background: #ffd93d; }
        body[data-theme="8bit"] .dot.green { background: #4ecdc4; }

        body[data-theme="8bit"] .loading-overlay {
            background: #1a1a2e;
        }

        body[data-theme="8bit"] .loading-text {
            font-size: 0.5rem;
            color: #4ecdc4;
            animation: blink 1s infinite;
        }

        body[data-theme="8bit"] .preview-fallback {
            background: linear-gradient(135deg, #2d2d44 0%, #1f1f2e 100%);
            font-size: 0.5rem;
            color: #95e1d3;
        }

        body[data-theme="8bit"] .project-name {
            font-size: 0.9rem;
            color: #ffd93d;
            text-shadow: 2px 2px 0px #000;
        }

        body[data-theme="8bit"] .project-url {
            font-size: 0.6rem;
            color: #95e1d3;
            text-shadow: 1px 1px 0px #000;
        }

        body[data-theme="8bit"] .style-footer {
            background: rgba(26, 26, 46, 0.98);
            border-top: 4px solid #fff;
            box-shadow: 0 -4px 0 0 #000, 0 8px 0 0 #000, 0 8px 0 2px #fff;
        }

        body[data-theme="8bit"] .style-btn {
            background: #2d2d44;
            color: #fff;
            border: 2px solid #fff;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.5rem;
        }

        body[data-theme="8bit"] .style-btn.active {
            background: #ff6b6b;
            border-color: #ffd93d;
        }

        body[data-theme="8bit"] .sort-label {
            color: #4ecdc4;
            text-shadow: 1px 1px 0px #000;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.6rem;
        }

        body[data-theme="8bit"] .sort-btn {
            background: #2d2d44;
            color: #fff;
            border: 2px solid #fff;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.5rem;
        }

        body[data-theme="8bit"] .sort-btn.active {
            background: #ff6b6b;
            border-color: #ffd93d;
        }

        /* ========== MODERN MINIMALIST THEME ========== */
        body[data-theme="minimal"] {
            font-family: 'Inter', sans-serif;
            background: #fafafa;
            color: #1a1a1a;
        }

        body[data-theme="minimal"] .title {
            font-size: 3rem;
            font-weight: 700;
            color: #1a1a1a;
            letter-spacing: -2px;
        }

        body[data-theme="minimal"] .subtitle {
            font-size: 1rem;
            color: #666;
            font-weight: 300;
            letter-spacing: 2px;
        }

        body[data-theme="minimal"] .project-card {
            background: #fff;
            border: 1px solid #e0e0e0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        body[data-theme="minimal"] .project-card:hover {
            transform: translate3d(0, -8px, 0);
            box-shadow: 0 12px 24px rgba(0,0,0,0.12);
            border-color: #1a1a1a;
        }

        body[data-theme="minimal"] .preview-window {
            background: #fff;
            border: 1px solid #e0e0e0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        body[data-theme="minimal"] .window-header {
            background: #f5f5f5;
            border-bottom: 1px solid #e0e0e0;
        }

        body[data-theme="minimal"] .dot {
            border-radius: 50%;
        }

        body[data-theme="minimal"] .dot.red { background: #ff5f56; }
        body[data-theme="minimal"] .dot.yellow { background: #ffbd2e; }
        body[data-theme="minimal"] .dot.green { background: #27c93f; }

        body[data-theme="minimal"] .loading-overlay {
            background: #fafafa;
        }

        body[data-theme="minimal"] .loading-text {
            font-size: 0.75rem;
            color: #999;
            font-weight: 400;
        }

        body[data-theme="minimal"] .preview-fallback {
            background: #f5f5f5;
            font-size: 0.75rem;
            color: #999;
        }

        body[data-theme="minimal"] .project-name {
            font-size: 1.1rem;
            color: #1a1a1a;
            font-weight: 600;
        }

        body[data-theme="minimal"] .project-url {
            font-size: 0.85rem;
            color: #666;
            font-weight: 400;
        }

        body[data-theme="minimal"] .style-footer {
            background: rgba(250, 250, 250, 0.98);
            border-top: 2px solid #1a1a1a;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
        }

        body[data-theme="minimal"] .style-btn {
            background: #fff;
            color: #1a1a1a;
            border: 1px solid #e0e0e0;
            font-family: 'Inter', sans-serif;
            font-size: 0.7rem;
        }

        body[data-theme="minimal"] .style-btn.active {
            background: #1a1a1a;
            color: #fff;
        }

        body[data-theme="minimal"] .sort-label {
            color: #666;
            font-family: 'Inter', sans-serif;
            font-size: 0.7rem;
            font-weight: 400;
        }

        body[data-theme="minimal"] .sort-btn {
            background: #fff;
            color: #1a1a1a;
            border: 1px solid #e0e0e0;
            font-family: 'Inter', sans-serif;
            font-size: 0.65rem;
        }

        body[data-theme="minimal"] .sort-btn.active {
            background: #1a1a1a;
            color: #fff;
        }

        /* ========== CYBERPUNK THEME ========== */
        body[data-theme="cyber"] {
            font-family: 'Orbitron', sans-serif;
            background: #0a0a0a;
            color: #00ff41;
            background-image: 
                linear-gradient(rgba(0, 255, 65, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 65, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
        }

        body[data-theme="cyber"] .title {
            font-size: 3rem;
            font-weight: 900;
            color: #00ff41;
            text-shadow: 
                0 0 10px #00ff41,
                0 0 20px #00ff41,
                0 0 30px #00ff41;
            letter-spacing: 4px;
            animation: glitch 3s infinite;
        }

        @keyframes glitch {
            0%, 100% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
        }

        body[data-theme="cyber"] .subtitle {
            font-size: 0.9rem;
            color: #00d9ff;
            text-shadow: 0 0 10px #00d9ff;
            letter-spacing: 3px;
        }

        body[data-theme="cyber"] .project-card {
            background: rgba(0, 20, 10, 0.8);
            border: 2px solid #00ff41;
            box-shadow: 
                0 0 10px rgba(0, 255, 65, 0.5),
                inset 0 0 10px rgba(0, 255, 65, 0.1);
        }

        body[data-theme="cyber"] .project-card:hover {
            transform: translate3d(0, -6px, 0);
            box-shadow: 
                0 0 20px rgba(0, 255, 65, 0.8),
                0 0 40px rgba(0, 255, 65, 0.4),
                inset 0 0 20px rgba(0, 255, 65, 0.2);
            border-color: #00d9ff;
        }

        body[data-theme="cyber"] .preview-window {
            background: #000;
            border: 2px solid #00ff41;
            box-shadow: 
                inset 0 0 20px rgba(0, 255, 65, 0.2),
                0 0 10px rgba(0, 255, 65, 0.5);
        }

        body[data-theme="cyber"] .window-header {
            background: rgba(0, 255, 65, 0.2);
            border-bottom: 2px solid #00ff41;
        }

        body[data-theme="cyber"] .dot {
            border: 1px solid #00ff41;
            border-radius: 0;
            box-shadow: 0 0 5px currentColor;
        }

        body[data-theme="cyber"] .dot.red { background: #ff0040; box-shadow: 0 0 5px #ff0040; }
        body[data-theme="cyber"] .dot.yellow { background: #ffd700; box-shadow: 0 0 5px #ffd700; }
        body[data-theme="cyber"] .dot.green { background: #00ff41; box-shadow: 0 0 5px #00ff41; }

        body[data-theme="cyber"] .loading-overlay {
            background: rgba(0, 10, 5, 0.95);
        }

        body[data-theme="cyber"] .loading-text {
            font-size: 0.7rem;
            color: #00ff41;
            text-shadow: 0 0 10px #00ff41;
            animation: blink 1s infinite;
        }

        body[data-theme="cyber"] .preview-fallback {
            background: rgba(0, 20, 10, 0.8);
            font-size: 0.7rem;
            color: #00d9ff;
            text-shadow: 0 0 5px #00d9ff;
        }

        body[data-theme="cyber"] .project-name {
            font-size: 1rem;
            color: #00ff41;
            text-shadow: 0 0 10px #00ff41;
            font-weight: 700;
        }

        body[data-theme="cyber"] .project-url {
            font-size: 0.7rem;
            color: #00d9ff;
            text-shadow: 0 0 5px #00d9ff;
        }

        body[data-theme="cyber"] .style-footer {
            background: rgba(0, 10, 5, 0.98);
            border-top: 3px solid #00ff41;
            box-shadow: 
                0 -5px 20px rgba(0, 255, 65, 0.5),
                inset 0 1px 0 rgba(0, 255, 65, 0.2);
        }

        body[data-theme="cyber"] .style-btn {
            background: rgba(0, 255, 65, 0.1);
            color: #00ff41;
            border: 2px solid #00ff41;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.65rem;
            font-weight: 700;
            text-shadow: 0 0 5px #00ff41;
        }

        body[data-theme="cyber"] .style-btn.active {
            background: #00ff41;
            color: #000;
            box-shadow: 0 0 20px #00ff41;
        }

        /* ========== RETRO 80S THEME ========== */
        body[data-theme="80s"] {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ff006e 0%, #8338ec 25%, #3a86ff 50%, #06ffa5 75%, #ffbe0b 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: #fff;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        body[data-theme="80s"] .title {
            font-size: 3.5rem;
            font-weight: 700;
            color: #fff;
            text-shadow: 
                4px 4px 0px #ff006e,
                8px 8px 0px #8338ec,
                12px 12px 0px #3a86ff;
            letter-spacing: 3px;
        }

        body[data-theme="80s"] .subtitle {
            font-size: 1.1rem;
            color: #ffbe0b;
            text-shadow: 2px 2px 0px #ff006e;
            font-weight: 600;
            letter-spacing: 4px;
        }

        body[data-theme="80s"] .project-card {
            background: rgba(255, 255, 255, 0.95);
            border: 4px solid #ff006e;
            box-shadow: 
                0 0 0 4px #8338ec,
                0 0 0 8px #3a86ff,
                0 10px 30px rgba(0,0,0,0.3);
        }

        body[data-theme="80s"] .project-card:hover {
            transform: translateY(-8px) rotate(1deg);
            box-shadow: 
                0 0 0 4px #8338ec,
                0 0 0 8px #3a86ff,
                0 20px 40px rgba(0,0,0,0.4);
            border-color: #ffbe0b;
        }

        body[data-theme="80s"] .preview-window {
            background: #fff;
            border: 4px solid #ff006e;
            box-shadow: 
                inset 0 0 0 2px #8338ec,
                0 4px 0 0 #3a86ff;
        }

        body[data-theme="80s"] .window-header {
            background: linear-gradient(90deg, #ff006e, #8338ec, #3a86ff);
            border-bottom: 3px solid #ffbe0b;
        }

        body[data-theme="80s"] .dot {
            border: 2px solid #fff;
            border-radius: 50%;
        }

        body[data-theme="80s"] .dot.red { background: #ff006e; }
        body[data-theme="80s"] .dot.yellow { background: #ffbe0b; }
        body[data-theme="80s"] .dot.green { background: #06ffa5; }

        body[data-theme="80s"] .loading-overlay {
            background: rgba(255, 255, 255, 0.9);
        }

        body[data-theme="80s"] .loading-text {
            font-size: 0.9rem;
            color: #ff006e;
            font-weight: 700;
            animation: blink 1s infinite;
        }

        body[data-theme="80s"] .preview-fallback {
            background: linear-gradient(135deg, #ff006e, #8338ec);
            font-size: 0.9rem;
            color: #fff;
            font-weight: 600;
        }

        body[data-theme="80s"] .project-name {
            font-size: 1.2rem;
            color: #ff006e;
            font-weight: 700;
            text-shadow: 2px 2px 0px #8338ec;
        }

        body[data-theme="80s"] .project-url {
            font-size: 0.85rem;
            color: #8338ec;
            font-weight: 600;
        }

        body[data-theme="80s"] .style-footer {
            background: rgba(255, 0, 110, 0.98);
            border-top: 6px solid #ffbe0b;
            box-shadow: 
                0 -4px 0 0 #8338ec,
                0 -8px 0 0 #3a86ff,
                0 10px 30px rgba(0,0,0,0.3);
        }

        body[data-theme="80s"] .style-btn {
            background: #8338ec;
            color: #fff;
            border: 3px solid #ffbe0b;
            font-family: 'Poppins', sans-serif;
            font-size: 0.75rem;
            font-weight: 700;
        }

        body[data-theme="80s"] .style-btn.active {
            background: #ffbe0b;
            color: #ff006e;
            border-color: #fff;
        }

        /* ========== NATURE/ORGANIC THEME ========== */
        body[data-theme="nature"] {
            font-family: 'Comfortaa', sans-serif;
            background: linear-gradient(135deg, #2d5016 0%, #3d7c26 50%, #5ba85f 100%);
            color: #f5f5dc;
        }

        body[data-theme="nature"] .title {
            font-size: 3rem;
            font-weight: 700;
            color: #f5f5dc;
            text-shadow: 3px 3px 0px #2d5016;
            letter-spacing: 2px;
        }

        body[data-theme="nature"] .subtitle {
            font-size: 1rem;
            color: #c9e4ca;
            text-shadow: 2px 2px 0px #2d5016;
            font-weight: 400;
            letter-spacing: 3px;
        }

        body[data-theme="nature"] .project-card {
            background: rgba(245, 245, 220, 0.95);
            border: 3px solid #3d7c26;
            border-radius: 20px;
            box-shadow: 
                0 8px 16px rgba(45, 80, 22, 0.3),
                inset 0 2px 4px rgba(255, 255, 255, 0.5);
        }

        body[data-theme="nature"] .project-card:hover {
            transform: translateY(-6px);
            box-shadow: 
                0 12px 24px rgba(45, 80, 22, 0.4),
                inset 0 2px 4px rgba(255, 255, 255, 0.5);
            border-color: #5ba85f;
        }

        body[data-theme="nature"] .preview-window {
            background: #f5f5dc;
            border: 3px solid #3d7c26;
            border-radius: 15px;
            box-shadow: 
                inset 0 2px 8px rgba(45, 80, 22, 0.2),
                0 4px 8px rgba(45, 80, 22, 0.2);
        }

        body[data-theme="nature"] .window-header {
            background: linear-gradient(180deg, #5ba85f, #3d7c26);
            border-bottom: 2px solid #2d5016;
            border-radius: 12px 12px 0 0;
        }

        body[data-theme="nature"] .dot {
            border: 2px solid #2d5016;
            border-radius: 50%;
        }

        body[data-theme="nature"] .dot.red { background: #d4a574; }
        body[data-theme="nature"] .dot.yellow { background: #f4d03f; }
        body[data-theme="nature"] .dot.green { background: #5ba85f; }

        body[data-theme="nature"] .loading-overlay {
            background: rgba(245, 245, 220, 0.95);
            border-radius: 0 0 12px 12px;
        }

        body[data-theme="nature"] .loading-text {
            font-size: 0.85rem;
            color: #3d7c26;
            font-weight: 600;
            animation: blink 1s infinite;
        }

        body[data-theme="nature"] .preview-fallback {
            background: linear-gradient(135deg, #c9e4ca, #a8d5ba);
            border-radius: 0 0 12px 12px;
            font-size: 0.85rem;
            color: #2d5016;
            font-weight: 600;
        }

        body[data-theme="nature"] .project-name {
            font-size: 1.1rem;
            color: #2d5016;
            font-weight: 700;
        }

        body[data-theme="nature"] .project-url {
            font-size: 0.8rem;
            color: #3d7c26;
            font-weight: 400;
        }

        body[data-theme="nature"] .style-footer {
            background: rgba(45, 80, 22, 0.98);
            border-top: 4px solid #5ba85f;
            box-shadow: 
                0 -4px 0 0 #3d7c26,
                0 8px 16px rgba(45, 80, 22, 0.4);
        }

        body[data-theme="nature"] .style-btn {
            background: rgba(61, 124, 38, 0.8);
            color: #f5f5dc;
            border: 2px solid #5ba85f;
            border-radius: 15px;
            font-family: 'Comfortaa', sans-serif;
            font-size: 0.7rem;
            font-weight: 600;
        }

        body[data-theme="nature"] .style-btn.active {
            background: #5ba85f;
            border-color: #f5f5dc;
            box-shadow: 0 0 15px rgba(91, 168, 95, 0.5);
        }

        /* ========== GLASSMORPHISM THEME ========== */
        body[data-theme="glass"] {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            position: relative;
        }

        body[data-theme="glass"]::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3), transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(118, 75, 162, 0.3), transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        body[data-theme="glass"] .container {
            position: relative;
            z-index: 1;
        }

        body[data-theme="glass"] .title {
            font-size: 3.5rem;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 8px 32px rgba(0,0,0,0.3);
            letter-spacing: -1px;
            backdrop-filter: blur(10px);
        }

        body[data-theme="glass"] .subtitle {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 300;
            letter-spacing: 4px;
            text-shadow: 0 4px 16px rgba(0,0,0,0.2);
        }

        body[data-theme="glass"] .project-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            will-change: transform, backdrop-filter;
            transform: translateZ(0);
        }

        body[data-theme="glass"] .project-card:hover {
            transform: translateY(-8px);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 
                0 16px 48px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.4);
        }

        body[data-theme="glass"] .preview-window {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        body[data-theme="glass"] .window-header {
            background: rgba(255, 255, 255, 0.15);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px 15px 0 0;
            backdrop-filter: blur(10px);
        }

        body[data-theme="glass"] .dot {
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            backdrop-filter: blur(5px);
        }

        body[data-theme="glass"] .dot.red { background: rgba(255, 95, 86, 0.8); }
        body[data-theme="glass"] .dot.yellow { background: rgba(255, 189, 46, 0.8); }
        body[data-theme="glass"] .dot.green { background: rgba(39, 201, 63, 0.8); }

        body[data-theme="glass"] .loading-overlay {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0 0 15px 15px;
            backdrop-filter: blur(10px);
        }

        body[data-theme="glass"] .loading-text {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 400;
            animation: blink 1s infinite;
        }

        body[data-theme="glass"] .preview-fallback {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0 0 15px 15px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 400;
        }

        body[data-theme="glass"] .project-name {
            font-size: 1.2rem;
            color: #fff;
            font-weight: 600;
            text-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        body[data-theme="glass"] .project-url {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 400;
        }

        body[data-theme="glass"] .style-footer {
            background: rgba(255, 255, 255, 0.1);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
            box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.1);
        }

        body[data-theme="glass"] .style-btn {
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            font-family: 'Inter', sans-serif;
            font-size: 0.75rem;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }

        body[data-theme="glass"] .style-btn.active {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 16px rgba(255, 255, 255, 0.2);
        }

        /* ========== VINTAGE THEME ========== */
        body[data-theme="vintage"] {
            font-family: 'Playfair Display', serif;
            background: #f5e6d3;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(139, 69, 19, 0.03) 2px, rgba(139, 69, 19, 0.03) 4px);
            color: #3d2817;
        }

        body[data-theme="vintage"] .title {
            font-size: 3.5rem;
            font-weight: 900;
            color: #8b4513;
            text-shadow: 3px 3px 0px #d4a574, 6px 6px 0px #8b4513;
            letter-spacing: 2px;
            font-style: italic;
        }

        body[data-theme="vintage"] .subtitle {
            font-size: 1rem;
            color: #a0522d;
            font-weight: 400;
            letter-spacing: 5px;
            text-transform: uppercase;
        }

        body[data-theme="vintage"] .project-card {
            background: #fff8f0;
            border: 3px solid #8b4513;
            border-radius: 0;
            box-shadow: 
                8px 8px 0px #d4a574,
                16px 16px 0px #8b4513;
            position: relative;
        }

        body[data-theme="vintage"] .project-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border: 2px dashed #8b4513;
            opacity: 0.3;
        }

        body[data-theme="vintage"] .project-card:hover {
            transform: translateY(-4px);
            box-shadow: 
                10px 10px 0px #d4a574,
                20px 20px 0px #8b4513;
        }

        body[data-theme="vintage"] .preview-window {
            background: #fff8f0;
            border: 3px solid #8b4513;
            border-radius: 0;
            box-shadow: inset 0 0 0 2px #d4a574;
        }

        body[data-theme="vintage"] .window-header {
            background: linear-gradient(180deg, #d4a574, #8b4513);
            border-bottom: 3px solid #3d2817;
        }

        body[data-theme="vintage"] .dot {
            border: 2px solid #3d2817;
            border-radius: 0;
        }

        body[data-theme="vintage"] .dot.red { background: #cd853f; }
        body[data-theme="vintage"] .dot.yellow { background: #daa520; }
        body[data-theme="vintage"] .dot.green { background: #6b8e23; }

        body[data-theme="vintage"] .loading-overlay {
            background: #fff8f0;
        }

        body[data-theme="vintage"] .loading-text {
            font-size: 0.9rem;
            color: #8b4513;
            font-weight: 700;
            font-style: italic;
            animation: blink 1s infinite;
        }

        body[data-theme="vintage"] .preview-fallback {
            background: linear-gradient(135deg, #f5e6d3, #d4a574);
            font-size: 0.9rem;
            color: #8b4513;
            font-weight: 700;
        }

        body[data-theme="vintage"] .project-name {
            font-size: 1.3rem;
            color: #8b4513;
            font-weight: 700;
            font-style: italic;
        }

        body[data-theme="vintage"] .project-url {
            font-size: 0.85rem;
            color: #a0522d;
            font-weight: 400;
            font-style: italic;
        }

        body[data-theme="vintage"] .style-footer {
            background: rgba(139, 69, 19, 0.98);
            border-top: 4px solid #d4a574;
            box-shadow: 0 -4px 0 0 #3d2817;
        }

        body[data-theme="vintage"] .style-btn {
            background: rgba(212, 165, 116, 0.9);
            color: #3d2817;
            border: 2px solid #8b4513;
            font-family: 'Playfair Display', serif;
            font-size: 0.7rem;
            font-weight: 700;
            font-style: italic;
        }

        body[data-theme="vintage"] .style-btn.active {
            background: #8b4513;
            color: #fff8f0;
            border-color: #d4a574;
        }

        /* ========== SPACE/COSMIC THEME ========== */
        body[data-theme="space"] {
            font-family: 'Space Mono', monospace;
            background: #0a0e27;
            color: #fff;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(138, 43, 226, 0.3), transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 191, 255, 0.3), transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(255, 20, 147, 0.2), transparent 50%);
            position: relative;
            overflow-x: hidden;
        }

        body[data-theme="space"]::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(2px 2px at 20% 30%, #fff, transparent),
                radial-gradient(2px 2px at 60% 70%, #fff, transparent),
                radial-gradient(1px 1px at 50% 50%, #fff, transparent),
                radial-gradient(1px 1px at 80% 10%, #fff, transparent),
                radial-gradient(2px 2px at 90% 60%, #fff, transparent);
            background-size: 200% 200%;
            animation: twinkle 20s linear infinite;
            pointer-events: none;
            opacity: 0.6;
        }

        @keyframes twinkle {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-50%, -50%); }
        }

        body[data-theme="space"] .title {
            font-size: 3.5rem;
            font-weight: 700;
            color: #fff;
            text-shadow: 
                0 0 10px #8a2be2,
                0 0 20px #00bfff,
                0 0 30px #ff1493,
                0 0 40px #8a2be2;
            letter-spacing: 4px;
            animation: spaceGlow 3s ease-in-out infinite alternate;
        }

        @keyframes spaceGlow {
            0% { 
                text-shadow: 
                    0 0 10px #8a2be2,
                    0 0 20px #00bfff,
                    0 0 30px #ff1493;
            }
            100% { 
                text-shadow: 
                    0 0 20px #8a2be2,
                    0 0 30px #00bfff,
                    0 0 40px #ff1493,
                    0 0 50px #8a2be2;
            }
        }

        body[data-theme="space"] .subtitle {
            font-size: 1rem;
            color: #00bfff;
            font-weight: 700;
            letter-spacing: 4px;
            text-shadow: 0 0 10px #00bfff;
        }

        body[data-theme="space"] .project-card {
            background: rgba(10, 14, 39, 0.8);
            border: 2px solid #8a2be2;
            border-radius: 10px;
            box-shadow: 
                0 0 20px rgba(138, 43, 226, 0.5),
                inset 0 0 20px rgba(0, 191, 255, 0.1);
        }

        body[data-theme="space"] .project-card:hover {
            transform: translateY(-8px);
            box-shadow: 
                0 0 30px rgba(138, 43, 226, 0.8),
                0 0 50px rgba(0, 191, 255, 0.4),
                inset 0 0 30px rgba(255, 20, 147, 0.2);
            border-color: #00bfff;
        }

        body[data-theme="space"] .preview-window {
            background: #000;
            border: 2px solid #8a2be2;
            border-radius: 10px;
            box-shadow: 
                inset 0 0 30px rgba(138, 43, 226, 0.3),
                0 0 20px rgba(0, 191, 255, 0.2);
        }

        body[data-theme="space"] .window-header {
            background: linear-gradient(90deg, #8a2be2, #00bfff, #ff1493);
            border-bottom: 2px solid #fff;
            border-radius: 8px 8px 0 0;
        }

        body[data-theme="space"] .dot {
            border: 1px solid #fff;
            border-radius: 50%;
            box-shadow: 0 0 8px currentColor;
        }

        body[data-theme="space"] .dot.red { background: #ff1493; box-shadow: 0 0 8px #ff1493; }
        body[data-theme="space"] .dot.yellow { background: #ffd700; box-shadow: 0 0 8px #ffd700; }
        body[data-theme="space"] .dot.green { background: #00bfff; box-shadow: 0 0 8px #00bfff; }

        body[data-theme="space"] .loading-overlay {
            background: rgba(10, 14, 39, 0.95);
            border-radius: 0 0 8px 8px;
        }

        body[data-theme="space"] .loading-text {
            font-size: 0.8rem;
            color: #00bfff;
            font-weight: 700;
            text-shadow: 0 0 10px #00bfff;
            animation: blink 1s infinite;
        }

        body[data-theme="space"] .preview-fallback {
            background: rgba(10, 14, 39, 0.9);
            border-radius: 0 0 8px 8px;
            font-size: 0.8rem;
            color: #8a2be2;
            font-weight: 700;
            text-shadow: 0 0 10px #8a2be2;
        }

        body[data-theme="space"] .project-name {
            font-size: 1.1rem;
            color: #fff;
            font-weight: 700;
            text-shadow: 0 0 10px #8a2be2;
        }

        body[data-theme="space"] .project-url {
            font-size: 0.75rem;
            color: #00bfff;
            font-weight: 400;
            text-shadow: 0 0 5px #00bfff;
        }

        body[data-theme="space"] .style-footer {
            background: rgba(10, 14, 39, 0.98);
            border-top: 3px solid #8a2be2;
            box-shadow: 
                0 -5px 30px rgba(138, 43, 226, 0.5),
                inset 0 1px 0 rgba(0, 191, 255, 0.2);
        }

        body[data-theme="space"] .style-btn {
            background: rgba(138, 43, 226, 0.2);
            color: #00bfff;
            border: 2px solid #8a2be2;
            border-radius: 8px;
            font-family: 'Space Mono', monospace;
            font-size: 0.7rem;
            font-weight: 700;
            text-shadow: 0 0 5px #00bfff;
        }

        body[data-theme="space"] .style-btn.active {
            background: #8a2be2;
            color: #fff;
            box-shadow: 0 0 20px #8a2be2;
        }

        /* ========== NEON/ARCADE THEME ========== */
        body[data-theme="neon"] {
            font-family: 'Fredoka One', cursive;
            background: #000;
            color: #fff;
            position: relative;
        }

        body[data-theme="neon"]::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(255, 0, 255, 0.03) 2px, rgba(255, 0, 255, 0.03) 4px),
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0, 255, 255, 0.03) 2px, rgba(0, 255, 255, 0.03) 4px);
            pointer-events: none;
            z-index: 0;
        }

        body[data-theme="neon"] .container {
            position: relative;
            z-index: 1;
        }

        body[data-theme="neon"] .title {
            font-size: 4rem;
            font-weight: 400;
            color: #ff00ff;
            text-shadow: 
                0 0 10px #ff00ff,
                0 0 20px #ff00ff,
                0 0 30px #ff00ff,
                0 0 40px #ff00ff;
            letter-spacing: 3px;
            animation: neonFlicker 2s infinite alternate;
        }

        @keyframes neonFlicker {
            0%, 100% { 
                text-shadow: 
                    0 0 10px #ff00ff,
                    0 0 20px #ff00ff,
                    0 0 30px #ff00ff,
                    0 0 40px #ff00ff;
            }
            50% { 
                text-shadow: 
                    0 0 5px #ff00ff,
                    0 0 10px #ff00ff,
                    0 0 15px #ff00ff,
                    0 0 20px #ff00ff,
                    0 0 35px #ff00ff,
                    0 0 40px #ff00ff,
                    0 0 50px #ff00ff;
            }
        }

        body[data-theme="neon"] .subtitle {
            font-size: 1.2rem;
            color: #00ffff;
            font-weight: 400;
            letter-spacing: 5px;
            text-shadow: 
                0 0 10px #00ffff,
                0 0 20px #00ffff;
        }

        body[data-theme="neon"] .project-card {
            background: rgba(0, 0, 0, 0.9);
            border: 3px solid #ff00ff;
            border-radius: 0;
            box-shadow: 
                0 0 20px #ff00ff,
                inset 0 0 20px rgba(255, 0, 255, 0.1);
        }

        body[data-theme="neon"] .project-card:hover {
            transform: translateY(-6px);
            box-shadow: 
                0 0 30px #ff00ff,
                0 0 50px #00ffff,
                inset 0 0 30px rgba(255, 0, 255, 0.2);
            border-color: #00ffff;
        }

        body[data-theme="neon"] .preview-window {
            background: #000;
            border: 3px solid #ff00ff;
            border-radius: 0;
            box-shadow: 
                inset 0 0 30px rgba(255, 0, 255, 0.2),
                0 0 20px #ff00ff;
        }

        body[data-theme="neon"] .window-header {
            background: linear-gradient(90deg, #ff00ff, #00ffff);
            border-bottom: 3px solid #fff;
        }

        body[data-theme="neon"] .dot {
            border: 2px solid #fff;
            border-radius: 0;
            box-shadow: 0 0 10px currentColor;
        }

        body[data-theme="neon"] .dot.red { background: #ff00ff; box-shadow: 0 0 10px #ff00ff; }
        body[data-theme="neon"] .dot.yellow { background: #ffff00; box-shadow: 0 0 10px #ffff00; }
        body[data-theme="neon"] .dot.green { background: #00ffff; box-shadow: 0 0 10px #00ffff; }

        body[data-theme="neon"] .loading-overlay {
            background: rgba(0, 0, 0, 0.95);
        }

        body[data-theme="neon"] .loading-text {
            font-size: 0.9rem;
            color: #ff00ff;
            font-weight: 400;
            text-shadow: 0 0 10px #ff00ff;
            animation: blink 1s infinite;
        }

        body[data-theme="neon"] .preview-fallback {
            background: rgba(0, 0, 0, 0.9);
            font-size: 0.9rem;
            color: #00ffff;
            font-weight: 400;
            text-shadow: 0 0 10px #00ffff;
        }

        body[data-theme="neon"] .project-name {
            font-size: 1.3rem;
            color: #ff00ff;
            font-weight: 400;
            text-shadow: 
                0 0 10px #ff00ff,
                0 0 20px #ff00ff;
        }

        body[data-theme="neon"] .project-url {
            font-size: 0.85rem;
            color: #00ffff;
            font-weight: 400;
            text-shadow: 0 0 10px #00ffff;
        }

        body[data-theme="neon"] .style-footer {
            background: rgba(0, 0, 0, 0.98);
            border-top: 4px solid #ff00ff;
            box-shadow: 
                0 -5px 30px rgba(255, 0, 255, 0.5),
                inset 0 1px 0 rgba(0, 255, 255, 0.3);
        }

        body[data-theme="neon"] .style-btn {
            background: rgba(255, 0, 255, 0.2);
            color: #ff00ff;
            border: 3px solid #ff00ff;
            font-family: 'Fredoka One', cursive;
            font-size: 0.75rem;
            font-weight: 400;
            text-shadow: 0 0 10px #ff00ff;
            box-shadow: 0 0 10px rgba(255, 0, 255, 0.5);
        }

        body[data-theme="neon"] .style-btn.active {
            background: #ff00ff;
            color: #000;
            box-shadow: 0 0 30px #ff00ff;
        }

        /* ========== DARK LUXURY THEME ========== */
        body[data-theme="luxury"] {
            font-family: 'Playfair Display', serif;
            background: #0a0a0a;
            color: #d4af37;
            background-image: 
                linear-gradient(45deg, rgba(212, 175, 55, 0.05) 25%, transparent 25%),
                linear-gradient(-45deg, rgba(212, 175, 55, 0.05) 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, rgba(212, 175, 55, 0.05) 75%),
                linear-gradient(-45deg, transparent 75%, rgba(212, 175, 55, 0.05) 75%);
            background-size: 60px 60px;
            background-position: 0 0, 0 30px, 30px -30px, -30px 0px;
        }

        body[data-theme="luxury"] .title {
            font-size: 3.5rem;
            font-weight: 900;
            color: #d4af37;
            text-shadow: 
                2px 2px 0px #000,
                4px 4px 0px rgba(212, 175, 55, 0.3),
                0 0 30px rgba(212, 175, 55, 0.5);
            letter-spacing: 3px;
            font-style: italic;
        }

        body[data-theme="luxury"] .subtitle {
            font-size: 1rem;
            color: #c9a961;
            font-weight: 400;
            letter-spacing: 6px;
            text-transform: uppercase;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }

        body[data-theme="luxury"] .project-card {
            background: linear-gradient(145deg, #1a1a1a, #0f0f0f);
            border: 2px solid #d4af37;
            border-radius: 8px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(212, 175, 55, 0.1),
                0 0 20px rgba(212, 175, 55, 0.1);
            position: relative;
        }

        body[data-theme="luxury"] .project-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #d4af37, transparent);
        }

        body[data-theme="luxury"] .project-card:hover {
            transform: translateY(-8px);
            box-shadow: 
                0 16px 48px rgba(0, 0, 0, 0.6),
                inset 0 1px 0 rgba(212, 175, 55, 0.2),
                0 0 40px rgba(212, 175, 55, 0.3);
            border-color: #f4d03f;
        }

        body[data-theme="luxury"] .preview-window {
            background: #000;
            border: 2px solid #d4af37;
            border-radius: 8px;
            box-shadow: 
                inset 0 0 20px rgba(212, 175, 55, 0.1),
                0 0 15px rgba(212, 175, 55, 0.2);
        }

        body[data-theme="luxury"] .window-header {
            background: linear-gradient(180deg, #d4af37, #c9a961);
            border-bottom: 2px solid #000;
            border-radius: 6px 6px 0 0;
        }

        body[data-theme="luxury"] .dot {
            border: 2px solid #000;
            border-radius: 50%;
        }

        body[data-theme="luxury"] .dot.red { background: #8b0000; }
        body[data-theme="luxury"] .dot.yellow { background: #d4af37; }
        body[data-theme="luxury"] .dot.green { background: #006400; }

        body[data-theme="luxury"] .loading-overlay {
            background: rgba(0, 0, 0, 0.95);
            border-radius: 0 0 6px 6px;
        }

        body[data-theme="luxury"] .loading-text {
            font-size: 0.9rem;
            color: #d4af37;
            font-weight: 700;
            font-style: italic;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
            animation: blink 1s infinite;
        }

        body[data-theme="luxury"] .preview-fallback {
            background: linear-gradient(135deg, #1a1a1a, #0f0f0f);
            border-radius: 0 0 6px 6px;
            font-size: 0.9rem;
            color: #c9a961;
            font-weight: 700;
            font-style: italic;
        }

        body[data-theme="luxury"] .project-name {
            font-size: 1.2rem;
            color: #d4af37;
            font-weight: 700;
            font-style: italic;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }

        body[data-theme="luxury"] .project-url {
            font-size: 0.85rem;
            color: #c9a961;
            font-weight: 400;
            font-style: italic;
        }

        body[data-theme="luxury"] .style-footer {
            background: rgba(10, 10, 10, 0.98);
            border-top: 3px solid #d4af37;
            box-shadow: 
                0 -8px 32px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(212, 175, 55, 0.2);
        }

        body[data-theme="luxury"] .style-btn {
            background: rgba(212, 175, 55, 0.1);
            color: #d4af37;
            border: 2px solid #d4af37;
            border-radius: 6px;
            font-family: 'Playfair Display', serif;
            font-size: 0.7rem;
            font-weight: 700;
            font-style: italic;
            text-shadow: 0 0 5px rgba(212, 175, 55, 0.3);
        }

        body[data-theme="luxury"] .style-btn.active {
            background: #d4af37;
            color: #000;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.6);
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        @media (max-width: 768px) {
            body[data-theme="8bit"] .title,
            body[data-theme="minimal"] .title,
            body[data-theme="cyber"] .title,
            body[data-theme="80s"] .title,
            body[data-theme="nature"] .title,
            body[data-theme="glass"] .title,
            body[data-theme="vintage"] .title,
            body[data-theme="space"] .title,
            body[data-theme="neon"] .title,
            body[data-theme="luxury"] .title {
                font-size: 1.5rem;
            }

            body[data-theme="8bit"] .subtitle,
            body[data-theme="minimal"] .subtitle,
            body[data-theme="cyber"] .subtitle,
            body[data-theme="80s"] .subtitle,
            body[data-theme="nature"] .subtitle,
            body[data-theme="glass"] .subtitle,
            body[data-theme="vintage"] .subtitle,
            body[data-theme="space"] .subtitle,
            body[data-theme="neon"] .subtitle,
            body[data-theme="luxury"] .subtitle {
                font-size: 0.6rem;
            }

            .projects-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .preview-window {
                height: 180px;
            }

            body[data-theme="8bit"] .project-name,
            body[data-theme="minimal"] .project-name,
            body[data-theme="cyber"] .project-name,
            body[data-theme="80s"] .project-name,
            body[data-theme="nature"] .project-name,
            body[data-theme="glass"] .project-name,
            body[data-theme="vintage"] .project-name,
            body[data-theme="space"] .project-name,
            body[data-theme="neon"] .project-name,
            body[data-theme="luxury"] .project-name {
                font-size: 0.9rem;
            }

            body[data-theme="8bit"] .project-url,
            body[data-theme="minimal"] .project-url,
            body[data-theme="cyber"] .project-url,
            body[data-theme="80s"] .project-url,
            body[data-theme="nature"] .project-url,
            body[data-theme="glass"] .project-url,
            body[data-theme="vintage"] .project-url,
            body[data-theme="space"] .project-url,
            body[data-theme="neon"] .project-url,
            body[data-theme="luxury"] .project-url {
                font-size: 0.65rem;
            }

            .style-footer {
                margin-top: 60px;
                padding: 20px 10px;
                gap: 5px;
            }

            .style-btn {
                padding: 8px 12px;
                font-size: 0.55rem !important;
            }
        }
    </style>
</head>
<body data-theme="8bit">
    <div class="container">
        <div class="header">
            <h1 class="title">MY PROJECTS</h1>
            <p class="subtitle"> CLICK TO EXPLORE </p>
        </div>

        <div class="sort-controls">
            <span class="sort-label">SORT BY:</span>
            <button class="sort-btn active" data-sort="default">DEFAULT</button>
            <button class="sort-btn" data-sort="title">TITLE</button>
            <button class="sort-btn" data-sort="date">DATE</button>
        </div>

        <div class="projects-grid">
            <a href="https://egil10.github.io/quizquaz/" target="_blank" class="project-card" data-title="quizquaz" data-date="2024">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/quizquaz/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">QUIZQUAZ</div>
                    <div class="project-url">egil10.github.io/quizquaz</div>
                </div>
            </a>

            <a href="https://www.notemarket.no/" target="_blank" class="project-card" data-title="note market" data-date="2024">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://www.notemarket.no/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">NOTE MARKET</div>
                    <div class="project-url">notemarket.no</div>
                </div>
            </a>

            <a href="https://egil10.github.io/stoch/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/stoch/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">STOCH</div>
                    <div class="project-url">egil10.github.io/stoch</div>
                </div>
            </a>

            <a href="https://gpa-pied.vercel.app/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://gpa-pied.vercel.app/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">GPA CALCULATOR</div>
                    <div class="project-url">gpa-pied.vercel.app</div>
                </div>
            </a>

            <a href="https://norgeskart-two.vercel.app/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://norgeskart-two.vercel.app/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">NORGESKART</div>
                    <div class="project-url">norgeskart-two.vercel.app</div>
                </div>
            </a>

            <a href="https://egil10.github.io/tourguide/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/tourguide/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">TOUR GUIDE</div>
                    <div class="project-url">egil10.github.io/tourguide</div>
                </div>
            </a>

            <a href="https://kunstquiz.art/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://kunstquiz.art/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">KUNST QUIZ</div>
                    <div class="project-url">kunstquiz.art</div>
                </div>
            </a>

            <a href="https://egil10.github.io/dino-game/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/dino-game/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">DINO GAME</div>
                    <div class="project-url">egil10.github.io/dino-game</div>
                </div>
            </a>

            <a href="https://egil10.github.io/kadonk-online/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/kadonk-online/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">KADONK ONLINE</div>
                    <div class="project-url">egil10.github.io/kadonk-online</div>
                </div>
            </a>

            <a href="https://egil10.github.io/ibdprep/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/ibdprep/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">IBDP REP</div>
                    <div class="project-url">egil10.github.io/ibdprep</div>
                </div>
            </a>

            <a href="https://egil10.github.io/ballonger/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/ballonger/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">BALLONGER</div>
                    <div class="project-url">egil10.github.io/ballonger</div>
                </div>
            </a>

            <a href="https://egil10.github.io/rumpetaske/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/rumpetaske/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">RUMPETASKE</div>
                    <div class="project-url">egil10.github.io/rumpetaske</div>
                </div>
            </a>

            <a href="https://egil10.github.io/music/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/music/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">MUSIC</div>
                    <div class="project-url">egil10.github.io/music</div>
                </div>
            </a>

            <a href="https://egil10.github.io/estimation/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/estimation/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">ESTIMATION</div>
                    <div class="project-url">egil10.github.io/estimation</div>
                </div>
            </a>

            <a href="https://egil10.github.io/UKnotOK/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/UKnotOK/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">UK NOT OK</div>
                    <div class="project-url">egil10.github.io/UKnotOK</div>
                </div>
            </a>

            <a href="https://riksdata.org/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://riksdata.org/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">RIKSDATA</div>
                    <div class="project-url">riksdata.org</div>
                </div>
            </a>

            <a href="https://egil10.github.io/budget/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/budget/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">BUDGET</div>
                    <div class="project-url">egil10.github.io/budget</div>
                </div>
            </a>

            <a href="https://egil10.github.io/map/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/map/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">MAP</div>
                    <div class="project-url">egil10.github.io/map</div>
                </div>
            </a>

            <a href="https://3000meter.com/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://3000meter.com/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">3000 METER</div>
                    <div class="project-url">3000meter.com</div>
                </div>
            </a>

            <a href="https://egil10.github.io/gpfg-quiz/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/gpfg-quiz/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">GPFG QUIZ</div>
                    <div class="project-url">egil10.github.io/gpfg-quiz</div>
                </div>
            </a>

            <a href="https://egil10.github.io/chords/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/chords/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">CHORDS</div>
                    <div class="project-url">egil10.github.io/chords</div>
                </div>
            </a>

            <a href="https://egil10.github.io/quickmaths/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://egil10.github.io/quickmaths/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">QUICK MATHS</div>
                    <div class="project-url">egil10.github.io/quickmaths</div>
                </div>
            </a>

            <a href="https://hakonag.github.io/endlessquiz/" target="_blank" class="project-card">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://hakonag.github.io/endlessquiz/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">ENDLESS QUIZ</div>
                    <div class="project-url">hakonag.github.io/endlessquiz</div>
                </div>
            </a>

            <a href="https://pro-con-chi.vercel.app/" target="_blank" class="project-card" data-title="pro con chi" data-date="2024">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://pro-con-chi.vercel.app/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">PRO CON CHI</div>
                    <div class="project-url">pro-con-chi.vercel.app</div>
                </div>
            </a>

            <a href="https://peoples-peach.vercel.app/" target="_blank" class="project-card" data-title="peoples peach" data-date="2024">
                <div class="preview-window">
                    <div class="window-header">
                        <div class="window-dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                    </div>
                    <div class="loading-overlay">
                        <div class="loading-text">LOADING...</div>
                    </div>
                    <iframe class="preview-iframe" src="https://peoples-peach.vercel.app/" loading="lazy"></iframe>
                </div>
                <div class="project-info">
                    <div class="project-name">PEOPLES PEACH</div>
                    <div class="project-url">peoples-peach.vercel.app</div>
                </div>
            </a>
        </div>
    </div>

    <footer class="style-footer">
        <button class="style-btn active" data-theme="8bit">8-BIT</button>
        <button class="style-btn" data-theme="minimal">MINIMAL</button>
        <button class="style-btn" data-theme="cyber">CYBER</button>
        <button class="style-btn" data-theme="80s">80'S</button>
        <button class="style-btn" data-theme="nature">NATURE</button>
        <button class="style-btn" data-theme="glass">GLASS</button>
        <button class="style-btn" data-theme="vintage">VINTAGE</button>
        <button class="style-btn" data-theme="space">SPACE</button>
        <button class="style-btn" data-theme="neon">NEON</button>
        <button class="style-btn" data-theme="luxury">LUXURY</button>
    </footer>

    <script>
        // Performance optimizations
        'use strict';
        
        // Use requestAnimationFrame for smooth theme transitions
        const raf = window.requestAnimationFrame || ((fn) => setTimeout(fn, 16));
        
        // Theme switching with optimized updates
        const themeButtons = document.querySelectorAll('.style-btn');
        const body = document.body;

        // Load saved theme
        const savedTheme = localStorage.getItem('theme') || '8bit';
        body.setAttribute('data-theme', savedTheme);
        themeButtons.forEach(btn => {
            if (btn.getAttribute('data-theme') === savedTheme) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });

        // Cache iframe states to prevent reloads on theme change
        const iframeCache = new Map();
        let themeChanging = false;
        
        // Optimized theme switching that doesn't affect iframes
        themeButtons.forEach(button => {
            button.addEventListener('click', () => {
                const theme = button.getAttribute('data-theme');
                
                // Prevent iframe reloads during theme change
                themeChanging = true;
                
                // Use requestAnimationFrame for smooth transition
                raf(() => {
                    // Store iframe states before theme change
                    const iframes = document.querySelectorAll('.preview-iframe');
                    iframes.forEach(iframe => {
                        const cache = iframeCache.get(iframe);
                        if (cache) {
                            // Preserve loaded state
                            if (!cache.loaded) {
                                try {
                                    // Check if iframe is actually loaded
                                    if (iframe.contentDocument || iframe.contentWindow) {
                                        cache.loaded = true;
                                    }
                                } catch (e) {
                                    // Cross-origin, can't check
                                }
                            }
                            // Ensure src is preserved
                            if (iframe.src && iframe.src !== cache.src) {
                                cache.src = iframe.src;
                            }
                        }
                    });
                    
                    // Update body theme (CSS-only change, won't affect iframe content)
                    body.setAttribute('data-theme', theme);
                    
                    // Update active button
                    themeButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Save to localStorage
                    localStorage.setItem('theme', theme);
                    
                    // Re-enable after a brief delay
                    raf(() => {
                        themeChanging = false;
                    });
                });
            });
        });

        // High-performance sorting functionality
        const sortButtons = document.querySelectorAll('.sort-btn');
        const projectsGrid = document.querySelector('.projects-grid');
        let currentSort = 'default';
        let sortAnimationFrame = null;

        // Extract sort data from project cards with performance optimization
        function initializeProjectData() {
            const cards = document.querySelectorAll('.project-card');
            // Use requestIdleCallback for non-critical initialization
            const initData = (deadline) => {
                let i = 0;
                while (deadline.timeRemaining() > 0 && i < cards.length) {
                    const card = cards[i];
                    if (!card.hasAttribute('data-title')) {
                        const titleEl = card.querySelector('.project-name');
                        if (titleEl) {
                            card.setAttribute('data-title', titleEl.textContent.trim().toLowerCase());
                        }
                    }
                    if (!card.hasAttribute('data-date')) {
                        card.setAttribute('data-date', '2024');
                    }
                    i++;
                }
                if (i < cards.length) {
                    requestIdleCallback(initData);
                }
            };
            
            if ('requestIdleCallback' in window) {
                requestIdleCallback(initData);
            } else {
                // Fallback for browsers without requestIdleCallback
                cards.forEach(card => {
                    if (!card.hasAttribute('data-title')) {
                        const titleEl = card.querySelector('.project-name');
                        if (titleEl) {
                            card.setAttribute('data-title', titleEl.textContent.trim().toLowerCase());
                        }
                    }
                    if (!card.hasAttribute('data-date')) {
                        card.setAttribute('data-date', '2024');
                    }
                });
            }
        }

        // High-performance sorting using DocumentFragment and optimized animations
        function sortProjects(sortType) {
            if (sortAnimationFrame) {
                cancelAnimationFrame(sortAnimationFrame);
            }

            sortAnimationFrame = raf(() => {
                const cards = Array.from(document.querySelectorAll('.project-card'));
                
                // Temporarily disable transitions for faster sorting
                const originalTransition = projectsGrid.style.transition;
                projectsGrid.style.transition = 'none';
                
                // Add sorting class for transition
                cards.forEach(card => {
                    card.style.willChange = 'transform, opacity';
                    card.classList.add('sorting');
                });

                // Sort cards
                cards.sort((a, b) => {
                    if (sortType === 'title') {
                        const titleA = (a.getAttribute('data-title') || '').toLowerCase();
                        const titleB = (b.getAttribute('data-title') || '').toLowerCase();
                        return titleA.localeCompare(titleB);
                    } else if (sortType === 'date') {
                        const dateA = parseInt(a.getAttribute('data-date') || '0');
                        const dateB = parseInt(b.getAttribute('data-date') || '0');
                        return dateB - dateA; // Newest first
                    }
                    return 0; // Default order (maintains original DOM order)
                });

                // Use DocumentFragment for efficient DOM manipulation
                const fragment = document.createDocumentFragment();
                cards.forEach(card => {
                    fragment.appendChild(card);
                });

                // Single DOM update
                projectsGrid.appendChild(fragment);
                
                // Re-enable transitions
                raf(() => {
                    projectsGrid.style.transition = originalTransition;
                    cards.forEach(card => {
                        card.style.willChange = '';
                        card.classList.remove('sorting');
                    });
                });
            });
        }

        // Sort button handlers
        sortButtons.forEach(button => {
            button.addEventListener('click', () => {
                const sortType = button.getAttribute('data-sort');
                currentSort = sortType;
                
                // Update active button
                sortButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                // Perform sort
                sortProjects(sortType);
                
                // Save preference
                localStorage.setItem('sort', sortType);
            });
        });

        // Load saved sort preference
        const savedSort = localStorage.getItem('sort') || 'default';
        if (savedSort !== 'default') {
            const savedButton = document.querySelector(`.sort-btn[data-sort="${savedSort}"]`);
            if (savedButton) {
                savedButton.click();
            }
        }

        // Optimized iframe loading with lazy loading and state caching
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize project data for sorting
            initializeProjectData();
            const iframes = document.querySelectorAll('.preview-iframe');
            
            // Store original src for each iframe to prevent reloads
            iframes.forEach(iframe => {
                const originalSrc = iframe.src;
                if (originalSrc && !iframeCache.has(iframe)) {
                    iframeCache.set(iframe, {
                        src: originalSrc,
                        loaded: false,
                        loadingOverlay: iframe.parentElement.querySelector('.loading-overlay')
                    });
                }
            });
            
            // Use Intersection Observer for lazy loading off-screen iframes
            if ('IntersectionObserver' in window) {
                const iframeObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const iframe = entry.target;
                            const cache = iframeCache.get(iframe);
                            if (cache && cache.dataSrc && !iframe.src) {
                                iframe.src = cache.dataSrc;
                                cache.dataSrc = null;
                            }
                            observer.unobserve(iframe);
                        }
                    });
                }, {
                    rootMargin: '100px',
                    threshold: 0.01
                });

                iframes.forEach((iframe, index) => {
                    // Only lazy load iframes that are initially off-screen
                    if (index > 6) {
                        const cache = iframeCache.get(iframe);
                        if (cache && cache.src) {
                            cache.dataSrc = cache.src;
                            iframe.removeAttribute('src');
                            iframeObserver.observe(iframe);
                        }
                    }
                });
            }
            
            // Handle iframe loading states with caching
            iframes.forEach(iframe => {
                const cache = iframeCache.get(iframe);
                if (!cache) return;
                
                const loadingOverlay = cache.loadingOverlay;
                if (!loadingOverlay) return;
                
                // Check if already loaded (from cache)
                const checkLoaded = () => {
                    try {
                        // Try to access iframe content to check if loaded
                        if (iframe.contentDocument || iframe.contentWindow) {
                            cache.loaded = true;
                            loadingOverlay.classList.add('hidden');
                            return true;
                        }
                    } catch (e) {
                        // Cross-origin, can't check directly
                    }
                    return false;
                };
                
                // If already loaded, hide overlay immediately
                if (checkLoaded()) {
                    return;
                }
                
                let loaded = false;
                
                // Set timeout for slow-loading iframes
                const timeout = setTimeout(() => {
                    if (!loaded && loadingOverlay) {
                        loadingOverlay.innerHTML = '<div class="preview-fallback">LOADING...</div>';
                    }
                }, 5000);
                
                // Handle successful load
                const loadHandler = function() {
                    if (loaded || themeChanging) return;
                    loaded = true;
                    cache.loaded = true;
                    clearTimeout(timeout);
                    raf(() => {
                        if (loadingOverlay && !loadingOverlay.classList.contains('hidden')) {
                            loadingOverlay.classList.add('hidden');
                        }
                    });
                };
                
                // Only add listener if not already loaded
                if (!cache.loaded) {
                    iframe.addEventListener('load', loadHandler, { once: true });
                } else {
                    // Already loaded, hide overlay immediately
                    if (loadingOverlay) {
                        loadingOverlay.classList.add('hidden');
                    }
                }
                
                // Handle errors
                iframe.addEventListener('error', function() {
                    if (loaded) return;
                    loaded = true;
                    cache.loaded = false;
                    clearTimeout(timeout);
                    if (loadingOverlay) {
                        loadingOverlay.innerHTML = '<div class="preview-fallback">PREVIEW UNAVAILABLE</div>';
                    }
                }, { once: true });
            });
        });

        // Optimize scroll performance
        let ticking = false;
        function updateOnScroll() {
            // Any scroll-based updates can go here
            ticking = false;
        }

        window.addEventListener('scroll', () => {
            if (!ticking) {
                raf(updateOnScroll);
                ticking = true;
            }
        }, { passive: true });
    </script>
</body>
</html>
